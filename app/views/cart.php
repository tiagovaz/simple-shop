<h2>Your Shopping Cart</h2>

<?php if (empty($items)): ?>
  <div class="alert" style="text-align: center; padding: 40px;">
    <p style="font-size: 18px; margin: 16px 0 8px 0; font-weight: 600;">Your cart is empty</p>
    <p class="muted">Browse our collection of quality pre-owned instruments!</p>
    <a href="index.php?action=home" class="btn" style="margin-top: 20px;">Browse Instruments</a>
  </div>
<?php else: ?>

  <div class="table">
    <div class="row head">
      <div>Instrument</div><div>Price</div><div>Qty</div><div>Line</div><div></div>
    </div>

    <?php foreach ($items as $it): $p = $it['product']; ?>
      <div class="row">
        <div><?= htmlspecialchars($p['name']) ?></div>
        <div>$<?= number_format((float)$p['price'], 2) ?></div>
        <div><?= (int)$it['qty'] ?></div>
        <div>$<?= number_format((float)$it['line'], 2) ?></div>
        <div><a class="danger" href="index.php?action=remove_from_cart&id=<?= (int)$p['id'] ?>">Remove</a></div>
      </div>
    <?php endforeach; ?>
  </div>

  <p class="total">Total: <strong>$<?= number_format((float)$total, 2) ?></strong></p>

  <?php if (empty($_SESSION['user'])): ?>
    <div class="alert" style="text-align: center;">
      <p>Please <a href="index.php?action=login" style="font-weight: 600;">login</a> to proceed</p>
      <p class="muted" style="font-size: 12px;">(Checkout intentionally omitted in this demo)</p>
    </div>
  <?php else: ?>
    <p class="muted" style="text-align: center;">Checkout feature is intentionally omitted</p>
  <?php endif; ?>
<?php endif; ?>
